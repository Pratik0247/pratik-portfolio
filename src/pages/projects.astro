---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const projects = await getCollection("projects");
---
<BaseLayout title="Projects">
  <h1 class="text-3xl font-semibold tracking-tight">Projects</h1>
  <p class="mt-2 text-white/70">Case studies of systems, infra, and AI projects.</p>

  <div class="mt-8 space-y-8">
    {projects.map((p) => (
      <section class="rounded-2xl border border-white/10 bg-white/5 p-6">
        <h2 class="text-xl font-semibold tracking-tight">{p.data.title}</h2>

        {/* stack pills */}
        {p.data.stack && (
          <div class="mt-2 flex flex-wrap gap-2">
            {p.data.stack.map((tech) => (
              <span class="px-2 py-1 text-xs rounded-full bg-white/10 border border-white/10 text-white/70">
                {tech}
              </span>
            ))}
          </div>
        )}

        {p.data.summary && (
          <p class="mt-4 text-sm text-white/80 leading-relaxed">{p.data.summary}</p>
        )}

        {/* only show "Read more" if body exists */}
        {p.body && (
          <div class="mt-4">
            <a
              href={`/projects/${p.slug}`}
              class="text-sm text-sky-400 hover:underline"
            >
              Read more â†’
            </a>
          </div>
        )}
      </section>
    ))}
  </div>
</BaseLayout>
